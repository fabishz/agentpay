{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/fabrice/Desktop/hackathons/agentpay-gateway/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\n\nconst prismaClientSingleton = () => {\n    return new PrismaClient();\n};\n\ntype PrismaClientSingleton = ReturnType<typeof prismaClientSingleton>;\n\nconst globalForPrisma = globalThis as unknown as {\n    prisma: PrismaClientSingleton | undefined;\n};\n\nexport const prisma = globalForPrisma.prisma ?? prismaClientSingleton();\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,wBAAwB;IAC1B,OAAO,IAAI,6NAAY;AAC3B;AAIA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI;AAEhD,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///home/fabrice/Desktop/hackathons/agentpay-gateway/src/app/api/transactions/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { prisma } from '@/lib/prisma';\n\nexport async function GET() {\n    try {\n        const transactions = await prisma.transaction.findMany({\n            include: { paywall: true },\n            orderBy: { createdAt: 'desc' },\n        });\n        return NextResponse.json(transactions);\n    } catch (error) {\n        return NextResponse.json({ error: 'Failed to fetch transactions' }, { status: 500 });\n    }\n}\n\nexport async function POST(request: Request) {\n    try {\n        const body = await request.json();\n        const { paywallId, payerAddress, amount, txHash, status } = body;\n\n        const transaction = await prisma.transaction.create({\n            data: {\n                paywallId,\n                payerAddress,\n                amount: parseFloat(amount),\n                txHash,\n                status: status || 'pending',\n            },\n        });\n\n        return NextResponse.json(transaction);\n    } catch (error) {\n        return NextResponse.json({ error: 'Failed to record transaction' }, { status: 500 });\n    }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe;IAClB,IAAI;QACA,MAAM,eAAe,MAAM,uJAAM,CAAC,WAAW,CAAC,QAAQ,CAAC;YACnD,SAAS;gBAAE,SAAS;YAAK;YACzB,SAAS;gBAAE,WAAW;YAAO;QACjC;QACA,OAAO,uKAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,OAAO,uKAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA+B,GAAG;YAAE,QAAQ;QAAI;IACtF;AACJ;AAEO,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG;QAE5D,MAAM,cAAc,MAAM,uJAAM,CAAC,WAAW,CAAC,MAAM,CAAC;YAChD,MAAM;gBACF;gBACA;gBACA,QAAQ,WAAW;gBACnB;gBACA,QAAQ,UAAU;YACtB;QACJ;QAEA,OAAO,uKAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,OAAO,uKAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA+B,GAAG;YAAE,QAAQ;QAAI;IACtF;AACJ"}}]
}